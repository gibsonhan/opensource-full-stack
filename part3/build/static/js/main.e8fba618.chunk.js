(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),u=t.n(r),l=t(2),c=function(e){var n=e.newFilter,t=e.handleNewFilter;return o.a.createElement("div",null,"Filter show with: ",o.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.submit,t=e.nameValue,a=e.nameChange,r=e.phoneValue,u=e.phoneChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null," Add Contanct "),o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:t,onChange:a})),o.a.createElement("div",null,"phone:",o.a.createElement("input",{value:r,onChange:u})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"}," add "))))},m=function(e){var n=e.name,t=e.phoneNumber,a=e.handleDelete;return o.a.createElement("p",null,n," ",t," ",o.a.createElement("button",{onClick:a},"delete"))},d=function(e){var n=e.showFilterNames,t=e.handleDelete;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null," Phonebook Number"),n.map((function(e){return o.a.createElement(m,{key:e.id,name:e.name,phoneNumber:e.number,handleDelete:function(){t(e.id,e.name)}})})))},s=function(e){var n=e.message,t={color:e.color,background:"lightgrey",border:"bold",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,fontStyle:"solid",fontSize:20};return null===n?o.a.createElement(o.a.Fragment,null):o.a.createElement("div",{style:t},n)},f=t(3),h=t.n(f),b="http://localhost:3001/api/persons",p=function(){return h.a.get(b).then((function(e){return e.data}))},g=function(e){return h.a.post(b,e).then((function(e){return e.data}))},v=function(e){var n=b+"/".concat(e);return h.a.delete(n)},E=function(e,n){var t=b+"/".concat(e);return h.a.put(t,n).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),m=Object(l.a)(u,2),f=m[0],h=m[1],b=Object(a.useState)(""),w=Object(l.a)(b,2),j=w[0],O=w[1],k=Object(a.useState)(""),y=Object(l.a)(k,2),C=y[0],S=y[1],F=Object(a.useState)(!1),N=Object(l.a)(F,2),D=N[0],T=N[1],V=Object(a.useState)(null),A=Object(l.a)(V,2),B=A[0],x=A[1],I=Object(a.useState)("green"),J=Object(l.a)(I,2),L=J[0],P=J[1];Object(a.useEffect)((function(){p().then((function(e){console.log("getAll promise successful"),r(e)})).catch((function(e){return console.log("getAll promise rejected",e)}))}),[]);var z=function(){return t.map((function(e){return e.name})).includes(f)},R=D?t.filter((function(e){return e.name.toLowerCase().includes(C)})):t;return o.a.createElement("div",null,o.a.createElement("h1",null,"Phone Book"),o.a.createElement(s,{message:B,color:L}),o.a.createElement(c,{newFilter:C,handleNewFilter:function(e){""!==C&&T(!0),S(e.target.value.toLowerCase())}}),o.a.createElement(i,{submit:function(e){e.preventDefault();var n={name:f,number:j};if(!1===z())g(n).then((function(e){x("".concat(f," has been added to the phonebook")),setTimeout((function(){x(null)}),5e3),r(t.concat(e))})).catch((function(e){x(e.response.data.error),P("red"),setTimeout((function(){x(null),P("green")}),5e3)}));else if(!0===window.confirm("".concat(f," already exist in the phone book, would you like to replace the old number?"))){var a=t.filter((function(e){return e.name===f}));E(a[0].id,n).then((function(e){x("".concat(f," has been updated")),setTimeout((function(){x(null)}),5e3),r(t.map((function(n){return n.name!==f?n:e})))})).catch((function(e){console.log("update failed",e),x(e.response.data.error),P("red"),setTimeout((function(){x(null),P("green")}),5e3)}))}h(""),O("")},nameValue:f,nameChange:function(e){h(e.target.value)},phoneValue:j,phoneChange:function(e){O(e.target.value)}}),o.a.createElement(d,{showFilterNames:R,handleDelete:function(e,n){!0===window.confirm("Do you want to delete ".concat(n))&&v(e).then((function(){x("".concat(n," has been deleted")),setTimeout((function(){x(null)}),5e3),r(t.filter((function(n){return n.id!==e})))})).catch((function(a){console.log("error message:",a),x("Infomation about ".concat(n," has already been removed from the server")),P("red"),setTimeout((function(){x(null),P("green")}),5e3),r(t.filter((function(n){return n.id!==e})))}))}}))};u.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e8fba618.chunk.js.map